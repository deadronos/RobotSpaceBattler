---
applyTo: '**'
---

<todos title="battle-loop-analysis" agentRequirement="Review steps frequently throughout the conversation and DO NOT stop between steps unless they explicitly require it. Keep the todos updated using the todo_write tool (do not edit this file).">
- [-] inspect-relevant-files: Read key files to understand current implementation: `src/components/Simulation.tsx`, `src/components/Scene.tsx`, `src/components/battle/*`, `src/components/RobotPlaceholder.tsx`, `src/hooks/useBattleAdapter.ts`, `src/store/uiStore.ts`, `src/contracts/*`, and systems under `src/systems/` (physicsSync, performanceManager, uiAdapter). Note TODOs and placeholder UI. ðŸ”´
  _Start by locating placeholders and flow control for battle lifecycle._
- [ ] identify-placeholders: Locate components and data that are clearly placeholders (e.g., `RobotPlaceholder.tsx`, minimal props, hard-coded values, mocked scoring/spawn contracts) and record where they are used. ðŸŸ¡
- [ ] list-missing-features: Produce an itemised list of missing features needed for a full loop: state machine, event flow, spawn/reset, scoring aggregation, battlestats UI, animations/transitions, cleanup, reproducible simulation tick control, camera & HUD transitions, persistence, tests. ðŸ”´
- [ ] propose-implementation: Create concrete implementation steps, types, small code sketches (state types, advance function, reset logic), and where to change code. Provide minimal API contract and data shapes. ðŸ”´
- [ ] add-tests-and-run: Suggest and outline smoke tests / Vitest unit tests to cover the loop, and provide commands to run dev server and tests locally. ðŸŸ¡
</todos>

<!-- Auto-generated todo section -->
<!-- Add your custom Copilot instructions below -->
