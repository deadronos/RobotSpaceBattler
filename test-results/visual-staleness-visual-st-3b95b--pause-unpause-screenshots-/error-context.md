# Page snapshot

```yaml
- generic [active] [ref=e1]:
  - generic [ref=e3]:
    - generic [ref=e4]:
      - generic:
        - generic:
          - generic: FPS 57 | dt 20.0ms | t 1759511667245ms
    - generic [ref=e8]:
      - checkbox "Friendly fire" [ref=e9]
      - text: Friendly fire
    - button "Pause" [ref=e11] [cursor=pointer]
    - generic [ref=e12]: Running @ 1.0x
    - generic:
      - generic:
        - generic: Red
        - generic: "17"
      - generic:
        - generic: Blue
        - generic: "11"
    - generic [ref=e13]:
      - generic [ref=e14]:
        - heading "Robot Prefabs" [level=3] [ref=e15]
        - group "Spawn team" [ref=e16]:
          - button "Red team" [ref=e17] [cursor=pointer]
          - button "Blue team" [ref=e18] [cursor=pointer]
      - generic [ref=e19]:
        - article [ref=e20]:
          - generic [ref=e21]:
            - strong [ref=e22]: Autocannon Gunner
            - generic [ref=e23]: GUN
          - paragraph [ref=e24]: Rapid-fire frontline unit with short cooldown bursts.
          - generic [ref=e25]:
            - generic [ref=e26]:
              - term [ref=e27]: HP
              - definition [ref=e28]: "100"
            - generic [ref=e29]:
              - term [ref=e30]: Speed
              - definition [ref=e31]: 3 m/s
            - generic [ref=e32]:
              - term [ref=e33]: Range
              - definition [ref=e34]: 15 m
            - generic [ref=e35]:
              - term [ref=e36]: Cooldown
              - definition [ref=e37]: 0.5s
            - generic [ref=e38]:
              - term [ref=e39]: Power
              - definition [ref=e40]: "15"
            - generic [ref=e41]:
              - term [ref=e42]: Accuracy
              - definition [ref=e43]: 80%
          - button "Spawn red gun" [ref=e44] [cursor=pointer]
        - article [ref=e45]:
          - generic [ref=e46]:
            - strong [ref=e47]: Beam Support
            - generic [ref=e48]: LASER
          - paragraph [ref=e49]: Precision beam that maintains pressure at long range.
          - generic [ref=e50]:
            - generic [ref=e51]:
              - term [ref=e52]: HP
              - definition [ref=e53]: "100"
            - generic [ref=e54]:
              - term [ref=e55]: Speed
              - definition [ref=e56]: 3 m/s
            - generic [ref=e57]:
              - term [ref=e58]: Range
              - definition [ref=e59]: 25 m
            - generic [ref=e60]:
              - term [ref=e61]: Cooldown
              - definition [ref=e62]: 1.5s
            - generic [ref=e63]:
              - term [ref=e64]: Power
              - definition [ref=e65]: "8"
            - generic [ref=e66]:
              - term [ref=e67]: Accuracy
              - definition [ref=e68]: 95%
          - button "Spawn red laser" [ref=e69] [cursor=pointer]
        - article [ref=e70]:
          - generic [ref=e71]:
            - strong [ref=e72]: Rocket Artillery
            - generic [ref=e73]: ROCKET
          - paragraph [ref=e74]: Slow-firing AoE rocket for clustered targets.
          - generic [ref=e75]:
            - generic [ref=e76]:
              - term [ref=e77]: HP
              - definition [ref=e78]: "100"
            - generic [ref=e79]:
              - term [ref=e80]: Speed
              - definition [ref=e81]: 3 m/s
            - generic [ref=e82]:
              - term [ref=e83]: Range
              - definition [ref=e84]: 20 m
            - generic [ref=e85]:
              - term [ref=e86]: Cooldown
              - definition [ref=e87]: 2s
            - generic [ref=e88]:
              - term [ref=e89]: Power
              - definition [ref=e90]: "25"
            - generic [ref=e91]:
              - term [ref=e92]: Accuracy
              - definition [ref=e93]: 70%
          - button "Spawn red rocket" [ref=e94] [cursor=pointer]
    - generic [ref=e95]:
      - generic [ref=e96]: "Entities: 50"
      - generic [ref=e97]: "Robots - Red: 21 | Blue: 24"
      - generic [ref=e98]:
        - button "+ Red Gunner" [ref=e99] [cursor=pointer]
        - button "+ Red Laser" [ref=e100] [cursor=pointer]
        - button "+ Red Rocket" [ref=e101] [cursor=pointer]
      - generic [ref=e102]:
        - button "+ Blue Rocket" [ref=e103] [cursor=pointer]
        - button "+ Blue Gunner" [ref=e104] [cursor=pointer]
        - button "+ Blue Laser" [ref=e105] [cursor=pointer]
      - generic [ref=e106]:
        - button "Red reinforcements x3" [ref=e107] [cursor=pointer]
        - button "Blue reinforcements x3" [ref=e108] [cursor=pointer]
        - button "Reset match" [ref=e109] [cursor=pointer]
  - generic:
    - button "Close" [ref=e110] [cursor=pointer]:
      - generic [ref=e111] [cursor=pointer]: Close
    - main [ref=e112]:
      - list [ref=e114]:
        - listitem [ref=e115]:
          - list [ref=e116]:
            - listitem [ref=e117]:
              - generic [ref=e118]:
                - generic [ref=e119]: "[TypeScript]"
                - generic [ref=e120]: "Interface 'ProjectileEntity' incorrectly extends interface 'Entity'. Types of property 'projectile' are incompatible. Type 'ProjectileComponent' is missing the following properties from type 'ProjectileComponent': id, position, velocity, lifespanMs, spawnedAtMs"
              - generic [ref=e122] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/components/Projectile.tsx:10:11
              - code [ref=e124]: "8 | import { ProjectileStreak } from \"./ProjectileStreak\"; 9 | > 10 | interface ProjectileEntity extends Entity { | ^^^^^^^^^^^^^^^^ 11 | projectile: ProjectileComponent; 12 | position: [number, number, number]; 13 | velocity?: [number, number, number];"
            - listitem [ref=e125]:
              - generic [ref=e126]:
                - generic [ref=e127]: "[TypeScript]"
                - generic [ref=e128]: "Argument of type 'ProjectileEntity' is not assignable to parameter of type 'PhysicsEntity'. Types of property 'projectile' are incompatible. Type 'ProjectileComponent' is missing the following properties from type 'ProjectileComponent': id, position, velocity, lifespanMs, spawnedAtMs"
              - generic [ref=e130] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/components/Projectile.tsx:19:49
              - code [ref=e132]: "17 | export function Projectile({ entity }: { entity: ProjectileEntity }) { 18 | const meshRef = useRef<Mesh>(null); > 19 | const { setRigidBody } = useEntityPhysicsSync(entity); | ^^^^^^ 20 | 21 | const colors = useMemo( 22 | () => ({"
            - listitem [ref=e133]:
              - generic [ref=e134]:
                - generic [ref=e135]: "[TypeScript]"
                - generic [ref=e136]: "Conversion of type 'Entity & { weapon?: WeaponComponent | undefined; weaponState?: WeaponStateComponent | undefined; }' to type 'RobotComponent' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first. Property 'health' is missing in type 'Entity & { weapon?: WeaponComponent | undefined; weaponState?: WeaponStateComponent | undefined; }' but required in type 'RobotComponent'."
              - generic [ref=e138] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/components/Simulation.tsx:196:12
              - code [ref=e140]: "194 | const robot = spawnRobot(r.team as Team, r.weaponType ?? (\"gun\" as WeaponType)); 195 | try { > 196 | (robot as RobotComponent).invulnerableUntil = r.invulnerableUntil; | ^^^^^^^^^^^^^^^^^^^^^^^ 197 | notifyEntityChanged(robot); 198 | invalidate(); 199 | } catch {"
            - listitem [ref=e141]:
              - generic [ref=e142]:
                - generic [ref=e143]: "[TypeScript]"
                - generic [ref=e144]: This comparison appears to be unintentional because the types 'number | undefined' and 'string' have no overlap.
              - generic [ref=e146] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/ecs/ecsResolve.ts:31:22
              - code [ref=e148]: "29 | if (typeof id === \"string\") { 30 | return Array.from(world.entities).find( > 31 | (candidate) => candidate.id === id, | ^^^^^^^^^^^^^^^^^^^ 32 | ) as (Entity & { id: string | number }) | undefined; 33 | } 34 |"
            - listitem [ref=e149]:
              - generic [ref=e150]:
                - generic [ref=e151]: "[TypeScript]"
                - generic [ref=e152]: Type 'number | undefined' is not assignable to type 'number'. Type 'undefined' is not assignable to type 'number'.
              - generic [ref=e154] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/robots/prefabCatalog.ts:33:7
              - code [ref=e156]: "31 | stats: { 32 | ...baseStats, > 33 | range: weaponProfiles.gun.range, | ^^^^^ 34 | cooldown: weaponProfiles.gun.cooldown, 35 | power: weaponProfiles.gun.power, 36 | accuracy: weaponProfiles.gun.accuracy,"
            - listitem [ref=e157]:
              - generic [ref=e158]:
                - generic [ref=e159]: "[TypeScript]"
                - generic [ref=e160]: Type 'number | undefined' is not assignable to type 'number'. Type 'undefined' is not assignable to type 'number'.
              - generic [ref=e162] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/robots/prefabCatalog.ts:46:7
              - code [ref=e164]: "44 | stats: { 45 | ...baseStats, > 46 | range: weaponProfiles.laser.range, | ^^^^^ 47 | cooldown: weaponProfiles.laser.cooldown, 48 | power: weaponProfiles.laser.power, 49 | accuracy: weaponProfiles.laser.accuracy,"
            - listitem [ref=e165]:
              - generic [ref=e166]:
                - generic [ref=e167]: "[TypeScript]"
                - generic [ref=e168]: Type 'number | undefined' is not assignable to type 'number'. Type 'undefined' is not assignable to type 'number'.
              - generic [ref=e170] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/robots/prefabCatalog.ts:59:7
              - code [ref=e172]: "57 | stats: { 58 | ...baseStats, > 59 | range: weaponProfiles.rocket.range, | ^^^^^ 60 | cooldown: weaponProfiles.rocket.cooldown, 61 | power: weaponProfiles.rocket.power, 62 | accuracy: weaponProfiles.rocket.accuracy,"
            - listitem [ref=e173]:
              - generic [ref=e174]:
                - generic [ref=e175]: "[TypeScript]"
                - generic [ref=e176]: Object literal may only specify known properties, but 'duration' does not exist in type 'WeaponBeamParams'. Did you mean to write 'durationMs'?
              - generic [ref=e178] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/robots/weaponProfiles.ts:36:19
              - code [ref=e180]: "34 | ammo: undefined, 35 | aoeRadius: undefined, > 36 | beamParams: { duration: 1000, width: 0.1, tickInterval: 100 }, | ^^^^^^^^ 37 | flags: { continuous: true }, 38 | }, 39 | rocket: {"
            - listitem [ref=e181]:
              - generic [ref=e182]:
                - generic [ref=e183]: "[TypeScript]"
                - generic [ref=e184]: Type 'string | number' is not assignable to type 'number | undefined'. Type 'string' is not assignable to type 'number'.
              - generic [ref=e186] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/DamageSystem.ts:81:9
              - code [ref=e188]: "79 | ], 80 | team: targetEntity.team, > 81 | killerId: damageEvent.sourceId, | ^^^^^^^^ 82 | killerTeam, 83 | }); 84 |"
            - listitem [ref=e189]:
              - generic [ref=e190]:
                - generic [ref=e191]: "[TypeScript]"
                - generic [ref=e192]: Type 'string' is not assignable to type 'number'.
              - generic [ref=e194] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/FxSystem.ts:22:5
              - code [ref=e196]: "20 | function spawnFx(world: World<Entity>, fx: FxSpawn) { 21 | const e: Entity = { > 22 | id: `fx_${fx.type}_${Math.random().toString(36).slice(2)}`, | ^^ 23 | position: [fx.position[0], fx.position[1], fx.position[2]], 24 | fx: { 25 | type: fx.type,"
            - listitem [ref=e197]:
              - generic [ref=e198]:
                - generic [ref=e199]: "[TypeScript]"
                - generic [ref=e200]: Type 'string' is not assignable to type 'number'.
              - generic [ref=e202] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/ProjectileSystem.ts:65:7
              - code [ref=e204]: "63 | velocity: [number, number, number]; 64 | } = { > 65 | id: `projectile_${fireEvent.weaponId}_${now}_${++projectileSerial}`, | ^^ 66 | position: [fireEvent.origin[0], fireEvent.origin[1], fireEvent.origin[2]], 67 | team: weapon.team, 68 | projectile: {"
            - listitem [ref=e205]:
              - generic [ref=e206]:
                - generic [ref=e207]: "[TypeScript]"
                - generic [ref=e208]: "Type '{ sourceWeaponId: string; ownerId: string; damage: number; team: Team; aoeRadius: number | undefined; lifespan: number; spawnTime: number; speed: number; homing: { turnSpeed: number; targetId: string | ... 1 more ... | undefined; } | undefined; }' is not assignable to type 'ProjectileComponent & ProjectileComponent'. Type '{ sourceWeaponId: string; ownerId: string; damage: number; team: Team; aoeRadius: number | undefined; lifespan: number; spawnTime: number; speed: number; homing: { turnSpeed: number; targetId: string | ... 1 more ... | undefined; } | undefined; }' is missing the following properties from type 'ProjectileComponent': id, ownerTeam, position, velocity, and 2 more."
              - generic [ref=e210] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/ProjectileSystem.ts:68:7
              - code [ref=e212]: "66 | position: [fireEvent.origin[0], fireEvent.origin[1], fireEvent.origin[2]], 67 | team: weapon.team, > 68 | projectile: { | ^^^^^^^^^^ 69 | sourceWeaponId: fireEvent.weaponId, 70 | ownerId: ownerGameplayId, 71 | damage: weapon.power,"
            - listitem [ref=e213]:
              - generic [ref=e214]:
                - generic [ref=e215]: "[TypeScript]"
                - generic [ref=e216]: Property 'ownerId' does not exist on type 'never'.
              - generic [ref=e218] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/ProjectileSystem.ts:291:27
              - code [ref=e220]: "289 | continue; 290 | } > 291 | if (candidate.weapon?.ownerId && candidate.weapon.ownerId === sourceId) { | ^^^^^^^ 292 | continue; 293 | } 294 | if (!friendlyFire && candidate.team === sourceTeam) continue;"
            - listitem [ref=e221]:
              - generic [ref=e222]:
                - generic [ref=e223]: "[TypeScript]"
                - generic [ref=e224]: Property 'ownerId' does not exist on type 'never'.
              - generic [ref=e226] [cursor=pointer]: /GitHub/RobotSpaceBattler/src/systems/ProjectileSystem.ts:291:55
              - code [ref=e228]: "289 | continue; 290 | } > 291 | if (candidate.weapon?.ownerId && candidate.weapon.ownerId === sourceId) { | ^^^^^^^ 292 | continue; 293 | } 294 | if (!friendlyFire && candidate.team === sourceTeam) continue;"
            - listitem [ref=e229]:
              - generic [ref=e230]:
                - generic [ref=e231]: "[TypeScript]"
                - generic [ref=e232]: Cannot find name 'world'.
              - generic [ref=e234] [cursor=pointer]: /GitHub/RobotSpaceBattler/tests/initial-ecs-hydration.test.ts:8:25
              - code [ref=e236]: "6 | 7 | // Act: create a robots query matching Simulation.tsx criteria > 8 | const robotsQuery = world.with('team', 'weapon', 'weaponState'); | ^^^^^ 9 | const connected = robotsQuery.connect(); 10 | 11 | try {"
            - listitem [ref=e237]:
              - generic [ref=e238]:
                - generic [ref=e239]: "[TypeScript]"
                - generic [ref=e240]: Expected 0 arguments, but got 1.
              - generic [ref=e242] [cursor=pointer]: /GitHub/RobotSpaceBattler/tests/integration/eventOrdering.test.ts:10:43
              - code [ref=e244]: "8 | describe(\"event ordering\", () => { 9 | it(\"should emit events in deterministic order\", () => { > 10 | const result = simulateCombatSequence({ seed: 777 }); | ^^^^^^^^^^^^^ 11 | expect(result.eventOrder).toEqual([ 12 | \"weapon-fired\", 13 | \"hitscan-impact\","
            - listitem [ref=e245]:
              - generic [ref=e246]:
                - generic [ref=e247]: "[TypeScript]"
                - generic [ref=e248]: Property 'eventOrder' does not exist on type 'never'.
              - generic [ref=e250] [cursor=pointer]: /GitHub/RobotSpaceBattler/tests/integration/eventOrdering.test.ts:11:19
              - code [ref=e252]: "9 | it(\"should emit events in deterministic order\", () => { 10 | const result = simulateCombatSequence({ seed: 777 }); > 11 | expect(result.eventOrder).toEqual([ | ^^^^^^^^^^ 12 | \"weapon-fired\", 13 | \"hitscan-impact\", 14 | \"damage-applied\","
```